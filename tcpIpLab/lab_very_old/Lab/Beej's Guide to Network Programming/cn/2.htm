<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>c语言socket编程指南,Linux技术文章,Linux系列教程,Linux</title>
<meta  name="keywords" content="c语言socket编程指南,Linux技术文章,Linux系列教程,Linux,操作系统"/>
<meta  name="description" content="c语言socket编程指南介绍 　　Socket 编程让你沮丧吗？从man pages中很难得到有用的信息吗？你想跟上时代去编Internet相关的程序，但是为你在调用 connect() 前的bind() 的结构而不知所措？等等…    &amp;nbs"/>
<meta name="robots" content="index,follow"/>
<meta name="GOOGLEBOT" content="INDEX,FOLLOW" />
<link href="/css/2010/article/css.css" rel="stylesheet" type="text/css" />
<link href="/css/2010/article/ad.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" language="javascript" src="/JS/jquery-1.2.6.min.js"></script>
<script type="text/javascript" language="javascript" src="/JS/2010/Article.js"></script>
</head>
<body>
<div class="contant">
	 <div class="index_top">
	  <p>领先的中文IT技术网站&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.firnow.com" target="_blank">IT技术从现在起飞</a></p>
	  <span>飞诺旗下:&nbsp;<a href="http://bbs.firnow.com" target="_blank">技术社区</a>&nbsp;|&nbsp;<a href="http://ebook.firnow.com" target="_blank">在线电子书</a>&nbsp;|&nbsp;<a href="http://test.firnow.com" target="_blank">在线试题</a>&nbsp;|&nbsp;<a href="http://download.firnow.com" target="_blank">资源下载</a>&nbsp;|&nbsp;<a href="http://so.firnow.com" target="_blank">飞诺搜索</a>&nbsp;|&nbsp;<a href="http://blog.firnow.com" target="_blank">技术博客</a></span>
	</div>
	<div class="index_header">
	    <div class="index_logo"><a href="http://www.firnow.com" target="_blank"><img src="/images/2010/article/logo.gif" width="181" height="88" border="0" /></a></div>
	    <div class="ad1"><script language="javascript" src="/ad/2010/article/ad1.js"></script></div>
		<div class="index_header_right">
		  <table width="100%" height="82" border="0" cellpadding="10">
            <tr>
              <td colspan="4" valign="middle">
			    <form name="search" onSubmit="search(document.all.search.value);">
                <img style="float:left; margin-top:2px;" src="/images/2010/article/sousu.gif" width="68" height="25" />
                <label>
                <input type="text" class="index_header_right_text1" name="search" />
              </label>
			  <label>
                <input name="Submit" style="float:left; margin-left:6px; display:inline;" type="image" value="提交" src="/images/2010/article/sou_ok.gif"  />
              </label></form></td>
            </tr>
            <form name="login" onSubmit="loginbbs();">
            <tr>
              <td width="19%">用户名：</td>
              <td width="33%"><label>
                <input type="text" class="index_header_right_text2" name="username" />
              </label></td>
              <td width="16%">密&nbsp;&nbsp;&nbsp;码：</td>
              <td width="32%"><input type="password" class="index_header_right_text2" name="password" /></td>
            </tr>
            <tr>
              <td><label><input type="submit" value="" class="input_login"></label></td>
              <td>&nbsp;&nbsp;<input type="buttom" onclick="self.location='http://bbs.firnow.com/register.aspx'" value="" class="input_reg"></td>
              <td><a href="http://www.firnow.com" target="_blank">飞诺网</a></td>
              <td><a href="javascript:window.external.addFavorite('http://www.firnow.com','飞诺网');">加入收藏</a></td>
            </tr>
            </form>
          </table>
		</div>
	</div>
	<div class="index_banner">
	    <a href="http://www.firnow.com" class="index_banner_on" onmouseover="ChgTab(1);" target="_blank">飞诺网</a>
		<a href="/list/10601.shtml" onmouseover="ChgTab(2);" target="_blank">Linux</a>
		<a href="http://news.firnow.com" target="_blank">新闻频道</a>
		<a href="http://dev.firnow.com" target="_blank">开发频道</a>
		<a href="http://sys.firnow.com/" target="_blank">系统频道</a>
		<a href="http://server.firnow.com/" target="_blank">服务器</a>
		<a href="http://network.firnow.com/" target="_blank">网络频道</a>
		<a href="http://netsecurity.firnow.com/" target="_blank">网络安全</a>
		<a href="http://Dev.firnow.com/java.shtml" target="_blank">Java频道</a>
		<a href="http://Dev.firnow.com/c.shtml" target="_blank">C/C++</a>
		<a href="http://Dev.firnow.com/php.shtml" target="_blank">PHP开发</a>
		<a href="http://ebook.firnow.com" target="_blank">电子书</a>
		<a href="http://download.firnow.com" target="_blank">资源下载</a>
		<a href="http://bbs.firnow.com" target="_blank">社&nbsp;区</a>
		<a href="http://blog.firnow.com" target="_blank">博&nbsp;客</a>
		<a href="http://test.firnow.com" target="_blank">在线试题</a>
	</div>
	<div class="index_banner2" id="index1">
	    	    <a href="/list/106.shtml" target="_blank">操作系统</a>
	    	    <a href="/list/10601.shtml" target="_blank">Linux</a>
	    	    <a href="/list/10602.shtml" target="_blank">Windows xp</a>
	    	    <a href="/list/10603.shtml" target="_blank">Windows 2003</a>
	    	    <a href="/list/10604.shtml" target="_blank">Windows 2000/NT</a>
	    	    <a href="/list/10605.shtml" target="_blank">DOS</a>
	    	    <a href="/list/10606.shtml" target="_blank">Mac OS X</a>
	    	    <a href="/list/10607.shtml" target="_blank">Vista</a>
	    	    <a href="/list/10608.shtml" target="_blank">FreeBSD</a>
	    	    <a href="/list/10609.shtml" target="_blank">Solaris</a>
	    	    <a href="/list/10610.shtml" target="_blank">SCO UNIX</a>
	    	    <a href="/list/10611.shtml" target="_blank">AIX</a>
	    	    <a href="/list/10612.shtml" target="_blank">Windows 2008</a>
	    	</div>
	<div class="cle"></div>
		<div class="index_banner2" style="display:none" id="index2">
	     	    <a href="/list/1060101.shtml" target="_blank">Linux系列教程</a>
	    	    <a href="/list/1060102.shtml" target="_blank">Linux应用技巧</a>
	    	    <a href="/list/1060103.shtml" target="_blank">Linux技术文章</a>
	    	</div>
	<div class="cle"></div>
	<div class="index_banner3">
	   <a href="/list/103.shtml" target="_blank">编程开发</a>
	   <a href="/list/10303.shtml" target="_blank">JAVA</a>
	   <a href="/c.shtml" target="_blank">C/C++</a>
	   <a href="/list/10302.shtml" target="_blank">C++</a>
	   <a href="/list/10312.shtml" target="_blank">VC</a>
	   <a href="/list/10301.shtml" target="_blank">C语言</a>
	   <a href="/list/10304.shtml" target="_blank">VB</a>
	   <a href="/list/10314.shtml" target="_blank">C#</a>
	   <a href="/list/10305.shtml" target="_blank">Delphi</a>
	   <a href="/list/10306.shtml" target="_blank">Foxpro</a>
	   <a href="/list/10307.shtml" target="_blank">汇编</a>
	   <a href="/list/10313.shtml" target="_blank">shell编程</a>
	   <a href="/list/10308.shtml" target="_blank">游戏开发</a>
	   <a href="/list/10310.shtml" target="_blank">软件工程师</a>
	   <a href="/list/104.shtml" target="_blank">WEB开发</a>
	   <a href="/list/10406.shtml" target="_blank">PHP</a>
	   <a href="/list/10405.shtml" target="_blank">ASP</a>
	   <a href="/list/10404.shtml" target="_blank">Asp.net</a>
	   <a href="/list/10405.shtml" target="_blank">JSP</a>
	   <a href="/list/10410.shtml" target="_blank">AJAX</a>
	   <a href="/list/10408.shtml" target="_blank">CGI</a>
	   <a href="/list/10108.shtml" target="_blank">JavaScript</a>
	   <a href="/list/10104.shtml" target="_blank">HTML</a>
	   <a href="/list/10105.shtml" target="_blank">CSS</a>
	   <a href="/list/107.shtml" target="_blank">数据库</a>
	   <a href="/list/10703.shtml" target="_blank">MSSQL</a>
	   <a href="/list/10702.shtml" target="_blank">Mysql</a>
	   <a href="/list/10704.shtml" target="_blank">Oracle</a>
	   <a href="/list/10701.shtml" target="_blank">Access</a>
	   <a href="/list/10705.shtml" target="_blank">Sybase</a>
	   <a href="/list/10707.shtml" target="_blank">DB2</a>
	   <a href="/list/1070304.shtml" target="_blank">sql2005</a>
	   <a href="/list/105.shtml" target="_blank">Office</a>
	   <a href="/list/10501.shtml" target="_blank">Word</a>
	   <a href="/list/10502.shtml" target="_blank">Excel</a>
	   <a href="/list/10503.shtml" target="_blank">Powerpoint</a>
	   <a href="/list/10504.shtml" target="_blank">Wps</a>
	   <a href="/list/109.shtml" target="_blank">认证考试</a>
	   <a href="/list/1090103.shtml" target="_blank">二级C语言</a>
	   <a href="/list/1090203.shtml" target="_blank">三级网络</a>
	   <a href="/list/109030101.shtml" target="_blank">程序员</a>
	   <a href="/list/109030202.shtml" target="_blank">网络工程师</a>
	   <a href="/list/10905.shtml" target="_blank">思科认证</a>
	</div>
	<div class="index_banner4">
	<img src="/images/2010/article/logo1.gif" />
	<p>您当前的位置：<a href="http://www.firnow.com" target="_blank">飞诺网</a>
            >>&nbsp<a href="/linux.shtml" target="_blank">linux</a>
          >>&nbsp<a href="/list/1060103.shtml" target="_blank">Linux技术文章</a></p>
	</div>
   <div class="index_main">
   	<div class="ad2"><script language="javascript" src="/ad/2010/article/ad2.js"></script></div>
   	<div class="ad3"><script language="javascript" src="/ad/2010/article/ad3.js"></script></div>
  <div class="cle"></div>
   <div class="index_main_left">
        <div class="index_main_left_1">
		     <div class="index_main_left_1_top">
			      <div class="index_main_left_1_top2"><p>c语言socket编程指南</p></div>
				  <div class="index_main_left_1_top3">
				      <p>www.firnow.com&nbsp;&nbsp;&nbsp;&nbsp;时间&nbsp;：&nbsp;2008-08-15&nbsp;&nbsp;作者：佚名 &nbsp;&nbsp;编辑：本站 点击：&nbsp;&nbsp;<span id="articleTimes"></span> <a href="#comment" style="color:#F55308;">[&nbsp;评论&nbsp;]</a></p>
				  </div>
			 </div>
			 <div class="index_main_left_center">
			 <div class="ad4"><script language="javascript" src="/ad/2010/article/ad4.js"></script></div>
			 <div class="ad5"><script language="javascript" src="/ad/2010/article/ad5.js"></script></div>
			 <div class="ad6"><script language="javascript" src="/ad/2010/article/ad6.js"></script></div>
			 
没有发送到网络上，它们可以是本机字节顺序。&nbsp; <br>-------------------------------------------------------------------------------- <br>IP 地址和如何处理它们 <br>现
在我们很幸运，因为我们有很多的函数来方便地操作 IP 地址。没有 必要用手工计算它们，也没有必要用"&lt;&lt;"操作来储存成长整字型。
首先，假设你已经有了一个sockaddr_in结构体ina，你有一个IP地
址"132.241.5.10"要储存在其中，你就要用到函数inet_addr(),将IP地址从 点数格式转换成无符号长整型。使用方法如下： <br>ina.sin_addr.s_addr = inet_addr("132.241.5.10"); <br>注意，inet_addr()返回的地址已经是网络字节格式，所以你无需再调用 函数htonl()。 <br>我
们现在发现上面的代码片断不是十分完整的，因为它没有错误检查。 显而易见，当inet_addr()发生错误时返回-1。记住这些二进制数字？(无符
号数)-1仅仅和IP地址255.255.255.255相符合！这可是广播地址！大错特 错！记住要先进行错误检查。 <br>好了，现在你可以将IP地址转换成长整型了。有没有其相反的方法呢？ 它可以将一个in_addr结构体输出成点数格式？这样的话，你就要用到函数 inet_ntoa()("ntoa"的含义是"network to ascii")，就像这样：&nbsp; <br>printf("%s",inet_ntoa(ina.sin_addr)); <br>它
将输出IP地址。需要注意的是inet_ntoa()将结构体in-addr作为一
个参数，不是长整形。同样需要注意的是它返回的是一个指向一个字符的 指针。它是一个由inet_ntoa()控制的静态的固定的指针，所以每次调用
inet_ntoa()，它就将覆盖上次调用时所得的IP地址。例如： <br>char *a1, *a2; <br>. <br>. <br>a1 = inet_ntoa(ina1.sin_addr); /* 这是198.92.129.1 */ <br>a2 = inet_ntoa(ina2.sin_addr); /* 这是132.241.5.10 */ <br>printf("address 1: %s\n",a1); <br>printf("address 2: %s\n",a2); <br>输出如下： <br>address 1: 132.241.5.10 <br>address 2: 132.241.5.10 <br>假如你需要保存这个IP地址，使用strcopy()函数来指向你自己的字符 指针。 <br>上面就是关于这个主题的介绍。稍后，你将学习将一个类 似"wintehouse.gov"的字符串转换成它所对应的IP地址(查阅域名服务,稍 后)。 <br>-------------------------------------------------------------------------------- <br>socket()函数&nbsp; <br>我想我不能再不提这个了－下面我将讨论一下socket()系统调用。 <br>下面是详细介绍： <br>#include &lt;sys/types.h&gt;&nbsp; <br>#include &lt;sys/socket.h&gt;&nbsp; <br>int socket(int domain, int type, int protocol);&nbsp; <br>但
是它们的参数是什么? 首先，domain 应该设置成 "AF_INET"，就 象上面的数据结构struct sockaddr_in
中一样。然后，参数 type 告诉内核 是 SOCK_STREAM 类型还是 SOCK_DGRAM 类型。最后，把 protocol 设置为
"0"。(注意：有很多种 domain、type，我不可能一一列出了，请看 socket() 的
man帮助。当然，还有一个"更好"的方式去得到 protocol。同 时请查阅 getprotobyname() 的 man 帮助。)&nbsp; <br>socket() 只是返回你以后在系统调用种可能用到的 socket 描述符，或 者在错误的时候返回-1。全局变量 errno 中将储存返回的错误值。(请参考 perror() 的 man 帮助。)&nbsp; <br>-------------------------------------------------------------------------------- <br>bind()函数 <br>　
　一旦你有一个套接字，你可能要将套接字和机器上的一定的端口关联 起来。(如果你想用listen()来侦听一定端口的数据，这是必要一步--MUD
告 诉你说用命令 "telnet x.y.z 6969"。)如果你只想用 connect()，那么这个步
骤没有必要。但是无论如何，请继续读下去。 <br>这里是系统调用 bind() 的大概： <br>#include &lt;sys/types.h&gt; <br>#include &lt;sys/socket.h&gt; <br>int bind(int sockfd, struct sockaddr *my_addr, int addrlen);&nbsp; <br>sockfd 是调用 socket 返回的文件描述符。my_addr 是指向数据结构 struct sockaddr 的指针，它保存你的地址(即端口和 IP 地址) 信息。 addrlen 设置为 sizeof(struct sockaddr)。&nbsp; <br>简单得很不是吗? 再看看例子：&nbsp; <br>#include &lt;string.h&gt; <br>#include &lt;sys/types.h&gt; <br>#include &lt;sys/socket.h&gt; <br>#define MYPORT 3490&nbsp; <br>main() <br>　　 { <br>　　 int sockfd; <br>　　 struct sockaddr_in my_addr; <br>sockfd = socket(AF_INET, SOCK_STREAM, 0); /*需要错误检查 */ <br>my_addr.sin_family = AF_INET; /* host byte order */&nbsp; <br>　　 my_addr.sin_port = htons(MYPORT); /* short, network byte order */&nbsp; <br>　　 my_addr.sin_addr.s_addr = inet_addr("132.241.5.10");&nbsp; <br>　　 bzero(&amp;(my_addr.sin_zero),; /* zero the rest of the struct */&nbsp; <br>/* don't forget your error checking for bind(): */&nbsp; <br>　　 bind(sockfd, (struct sockaddr *)&amp;my_addr, sizeof(struct sockaddr));&nbsp; <br>　　 .&nbsp; <br>　　 .&nbsp; <br>　　 .&nbsp; <br>这里也有要注意的几件事情。my_addr.sin_port 是网络字节顺序， my_addr.sin_addr.s_addr 也是的。另外要注意到的事情是因系统的不同， 包含的头文件也不尽相同，请查阅本地的 man 帮助文件。 <br>在 bind() 主题中最后要说的话是，在处理自己的 IP 地址和/或端口的 时候，有些工作是可以自动处理的。 <br>my_addr.sin_port = 0; /* 随机选择一个没有使用的端口 */&nbsp; <br>　　my_addr.sin_addr.s_addr = INADDR_ANY; /* 使用自己的IP地址 */&nbsp; <br>通过将0赋给 my_addr.sin_port，你告诉 bind() 自己选择合适的端 口。同样，将 my_addr.sin_addr.s_addr 设置为 INADDR_ANY，你告诉 它自动填上它所运行的机器的 IP 地址。 <br>如
果你一向小心谨慎，那么你可能注意到我没有将 INADDR_ANY 转 换为网络字节顺序！这是因为我知道内部的东西：INADDR_ANY
实际上就 是 0！即使你改变字节的顺序，0依然是0。但是完美主义者说应该处处一
致，INADDR_ANY或许是12呢？你的代码就不能工作了，那么就看下面 的代码： <br>my_addr.sin_port = htons(0); /* 随机选择一个没有使用的端口 */&nbsp; <br>my_addr.sin_addr.s_addr = htonl(INADDR_ANY);/* 使用自己的IP地址 */&nbsp; <br>你或许不相信，上面的代码将可以随便移植。我只是想指出，既然你 所遇到的程序不会都运行使用htonl的INADDR_ANY。 <br>bind() 在错误的时候依然是返回-1，并且设置全局错误变量errno。&nbsp; <br>在你调用 bind() 的时候，你要小心的另一件事情是：不要采用小于 1024的端口号。所有小于1024的端口号都被系统保留！你可以选择从1024 到65535的端口(如果它们没有被别的程序使用的话)。 <br>你
要注意的另外一件小事是：有时候你根本不需要调用它。如果你使 用 connect() 来和远程机器进行通讯，你不需要关心你的本地端口号(就象
你在使用 telnet 的时候)，你只要简单的调用 connect() 就可以了，它会检
查套接字是否绑定端口，如果没有，它会自己绑定一个没有使用的本地端口。 <br>-------------------------------------------------------------------------------- <br>connect()程序 <br>　
　现在我们假设你是个 telnet 程序。你的用户命令你得到套接字的文件
描述符。你听从命令调用了socket()。下一步，你的用户告诉你通过端口 23(标准 telnet
端口)连接到"132.241.5.10"。你该怎么做呢? 幸运的是，你正在阅读 connect()--如何连接到远程主机这一章。你可
不想让你的用户失望。&nbsp; <br>connect() 系统调用是这样的：&nbsp; <br>#include &lt;sys/types.h&gt;&nbsp; <br>#include &lt;sys/socket.h&gt; <br>int connect(int sockfd, struct sockaddr *serv_addr, int addrlen);&nbsp; <br>sockfd 是系统调用 socket() 返回的套接字文件描述符。serv_addr 是 保存着目的地端口和 IP 地址的数据结构 struct sockaddr。addrlen 设置 为 sizeof(struct sockaddr)。&nbsp; <br>想知道得更多吗？让我们来看个例子：&nbsp; <br>#include &lt;string.h&gt;&nbsp; <br>#include &lt;sys/types.h&gt;&nbsp; <br>#include &lt;sys/socket.h&gt;&nbsp; <br>#define DEST_IP "132.241.5.10"&nbsp; <br>　　#define DEST_PORT 23&nbsp; <br>main()&nbsp; <br>　　 {&nbsp; <br>int sockfd;&nbsp; <br>struct sockaddr_in dest_addr; /* 目的地址*/&nbsp; <br>sockfd = socket(AF_INET, SOCK_STREAM, 0); /* 错误检查 */&nbsp; <br>dest_addr.sin_family = AF_INET; /* host byte order */&nbsp; <br>dest_addr.sin_port = htons(DEST_PORT); /* short, network byte order */&nbsp; <br>dest_addr.sin_addr.s_addr = inet_addr(DEST_IP);&nbsp; <br>bzero(&amp;(dest_addr.sin_zero),; /* zero the rest of the struct */&nbsp; <br>/* don't forget to error check the connect()! */&nbsp; <br>connect(sockfd, (struct sockaddr *)&amp;dest_addr, sizeof(struct sockaddr));&nbsp; <br>　　 .&nbsp; <br>　　 .&nbsp; <br>　　 .&nbsp; <br>　　再一次，你应该检查 connect() 的返回值--它在错误的时候返回-1，并 设置全局错误变量 errno。&nbsp; <br>同时，你可能看到，我没有调用 bind()。因为我不在乎本地的端口号。 我只关心我要去那。内核将为我选择一个合适的端口号，而我们所连接的 地方也自动地获得这些信息。一切都不用担心。&nbsp; <br>-------------------------------------------------------------------------------- <br>listen()函数 <br>　　是换换内容得时候了。假如你不希望与远程的一个地址相连，或者说， 仅仅是将它踢开，那你就需要等待接入请求并且用各种方法处理它们。处 理过程分两步：首先，你听--listen()，然后，你接受--accept() (请看下面的 内容)。 <br>除了要一点解释外，系统调用 listen 也相当简单。 <br>int listen(int sockfd, int backlog);&nbsp; <br>sockfd
是调用 socket() 返回的套接字文件描述符。backlog 是在进入 队列中允许的连接数目。什么意思呢? 进入的连接是在队列中一直等待直
到你接受 (accept() 请看下面的文章)连接。它们的数目限制于队列的允许。 大多数系统的允许数目是20，你也可以设置为5到10。 <br>和别的函数一样，在发生错误的时候返回-1，并设置全局错误变量 errno。 <br>你可能想象到了，在你调用 listen() 前你或者要调用 bind() 或者让内 核随便选择一个端口。如果你想侦听进入的连接，那么系统调用的顺序可 能是这样的：&nbsp; <br>socket();&nbsp; <br>　　bind();&nbsp; <br>listen();&nbsp; <br>　　/* accept() 应该在这 */&nbsp; <br>因为它相当的明了，我将在这里不给出例子了。(在 accept() 那一章的 代码将更加完全。)真正麻烦的部分在 accept()。&nbsp; <br>-------------------------------------------------------------------------------- <br>accept()函数 <br>　
　准备好了，系统调用 accept() 会有点古怪的地方的！你可以想象发生 这样的事情：有人从很远的地方通过一个你在侦听 (listen())
的端口连接 (connect()) 到你的机器。它的连接将加入到等待接受 (accept()) 的队列 中。你调用 accept()
告诉它你有空闲的连接。它将返回一个新的套接字文 件描述符！这样你就有两个套接字了，原来的一个还在侦听你的那个端口， 新的在准备发送
(send()) 和接收 ( recv()) 数据。这就是这个过程！ <br>函数是这样定义的：&nbsp; <br>#include &lt;sys/socket.h&gt; <br>int accept(int sockfd, void *addr, int *addrlen);&nbsp; <br>sockfd
相当简单，是和 listen() 中一样的套接字描述符。addr 是个指 向局部的数据结构 sockaddr_in
的指针。这是要求接入的信息所要去的地 方（你可以测定那个地址在那个端口呼叫你）。在它的地址传递给 accept 之 前，addrlen
是个局部的整形变量，设置为 sizeof(struct sockaddr_in)。 accept 将不会将多余的字节给
addr。如果你放入的少些，那么它会通过改 <br>变 addrlen 的值反映出来。&nbsp; <br>同样，在错误时返回-1，并设置全局错误变量 errno。&nbsp; <br>现在是你应该熟悉的代码片段。&nbsp; <br>#include &lt;string.h&gt; <br>#include &lt;sys/socket.h&gt; <br>#include &lt;sys/types.h&gt; <br>#define MYPORT 3490 /*用户接入端口*/&nbsp; <br>#define BACKLOG 10 /* 多少等待连接控制*/&nbsp; <br>main()&nbsp; <br>　　 {&nbsp; <br>　　int sockfd, new_fd; /* listen on sock_fd, new connection on new_fd */&nbsp; <br>　　struct sockaddr_in my_addr; /* 地址信息 */&nbsp; <br>　　struct sockaddr_in their_addr; /* connector's address information */&nbsp; <br>　　int sin_size;&nbsp; <br>sockfd = socket(AF_INET, SOCK_STREAM, 
			 <div align="center" class="pager"><span id="pagesSpan"><a href="136066.html">1</a>　<span id="2">2</span>　<a href="136066_3.html">3</a>　<a href="136066_4.html">4</a>　<a href="136066_5.html">5</a></span></div>
			 <div class="ad7"><script language="javascript" src="/ad/2010/article/ad7.js"></script></div>
			 <div class="ad8"><script language="javascript" src="/ad/2010/article/ad8.js"></script></div>
			 <div class="index_main_err">如果图片或页面不能正常显示请<a href="javascript:void(0)" onClick="ReportError()" class= "redlink"><font color="#990000"><strong>点击这里</strong></font></a></div>
			 </div>
			 <div class="index_main_left_foot">
			      <div class="index_main_left_foot1">
				  <p><a href="javascript:window.external.addFavorite(self.location,document.title);">【收藏此页】</a><a href="http://bbs.firnow.com" target="_blank">【飞诺社区】</a><a href="#comment">【发表评论】</a><a href="javascript:window.close()">【关闭】</a></p>
				  <a href="#comment"><img src="/images/2010/article/ping.gif" width="149" height="34" border="0" /></a>
				  </div>
				  <div class="index_main_left_foot2">
				  				  <p>上一篇：<a href="/course/6_system/linux/Linuxjs/2008815/136065.html">Linux USB驱动框架分析</a></p>
				                    				  <p>下一篇：<a href="/course/6_system/linux/Linuxjs/2008815/136067.html">A Tip: Direct Configure Script To the Correct Path</a></p>
				  				  </div>
			 </div> 
		</div>
		<div class="ad9"><script language="javascript" src="/ad/2010/article/ad9.js"></script></div>
		<div class="index_main_left_3">Linux技术文章推荐文章</div>
		<div class="index_main_left_4">
		  <ul>
		  		  		  <li><a href="/course/6_system/linux/Linuxjs/2008717/133321.html" target="_blank">用上了ubuntu，一个字“爽”</a></li>
		  		  <li><a href="/course/6_system/linux/Linuxjs/2008618/126265.html" target="_blank">使用 GDB 调试 Linux 软件</a></li>
		  		  <li><a href="/course/6_system/linux/Linuxjs/200868/123664.html" target="_blank">Linux压力测试与LTP体系结构(转)</a></li>
		  		  <li><a href="/course/6_system/linux/Linuxjs/20081013/150549.html" target="_blank">Iptables 说明图</a></li>
		  		  <li><a href="/course/6_system/linux/Linuxjs/20100224/195807.html" target="_blank">[zz] nagios图形</a></li>
		  		  <li><a href="/course/6_system/linux/Linuxjs/20100331/201637.html" target="_blank">crontab定时任务</a></li>
		  		  <li><a href="/course/6_system/linux/Linuxjs/20071114/86197.html" target="_blank">【Fedora core 7.0】增加Neoshine Linux 3.0软件</a></li>
		  		  <li><a href="/course/6_system/linux/Linuxjs/20100112/189394.html" target="_blank">makefile 解读</a></li>
		  		  </ul>
		  <ul>
		  		  		  <li><a href="/course/6_system/linux/Linuxjs/200861/119298.html" target="_blank">用 Timer Applet 做 GTD 管理</a></li>
		  		  <li><a href="/course/6_system/linux/Linuxjs/20090921/176035.html" target="_blank">V$SESSION_LONGOPS</a></li>
		  		  <li><a href="/course/6_system/linux/Linuxjs/2008106/148257.html" target="_blank">开始走向linux</a></li>
		  		  <li><a href="/course/6_system/linux/Linuxjs/2008926/145629.html" target="_blank">“懒惰” Linux 管理员的 10 个关键技巧</a></li>
		  		  <li><a href="/course/6_system/linux/Linuxjs/20091121/183121.html" target="_blank">linux应用层错误值（errno）使用</a></li>
		  		  <li><a href="/course/6_system/linux/Linuxjs/20090318/163214.html" target="_blank">Linux下双网卡绑定实现负载均衡</a></li>
		  		  <li><a href="/course/6_system/linux/Linuxjs/2008618/126299.html" target="_blank">bash 比较运算符</a></li>
		  		  <li><a href="/course/6_system/linux/Linuxjs/20100119/192812.html" target="_blank">vim下自定义折叠</a></li>
		  		  </ul>
		</div>
		<div class="index_main_left_5">
		      <div class="index_main_left_5_top"><p><a name="comment"></a>文章评论</p></div>
			  <div id="divComment" class="index_main_left_5_main"></div>
		</div>
		<div class="index_main_left_6">
		    <div class="index_main_left_6_left">
			     <div class="index_main_left_6_left_top">请您留言</div>
				 <div class="index_main_left_6_left_ceneter">
				  <form>
				   <table width="84%" height="216" border="0" cellpadding="10">
                     <tr>
                       <td width="19%" height="29">昵称：</td>
                       <td width="81%"><label>
                         <input type="text" class="index_main_left_6_left_ceneter_text" style="width:150px;" name="tbName" id="tbName" onclick="this.focus();this.select()" maxlength="20" />
                       </label></td>
                     </tr>
                     <tr>
                       <td>验证码：</td>
                       <td>
                       <span style="float:left;"><input name="tbCode" id="tbCode" class="index_main_left_6_left_ceneter_text" type="text" size="6"  /></span><span id="spanCode" style="float:left; clear:right;"><img  id="Img2" onclick="this.src=this.src"  style="display:none;"/></span>
                     </tr>
                     <tr>
                       <td height="26" colspan="2"><a href="http://bbs.firnow.com/register.aspx" style="color:#FF0000">注册会员</a> <a href="http://bbs.firnow.com/login.aspx">会员登录</a></td>
                     </tr>
                     <tr>
                       <td height="100" colspan="2"><label>
                         <a name="comment"></a><textarea name="tbContent" id="tbContent" class="index_main_left_6_left_ceneter_textarea" rows="5"></textarea>
                       </label></td>
                     </tr>
                     <tr>
                       <td colspan="2"><label>
                         <input id="btnCommit" name="btnCommit"  type="image" value="提交" src="/images/2010/article/fabiao.gif" />
                       </label></td>
                     </tr>
                   </table>
				   </form>
				 </div>
			</div>
			<div class="index_main_left_6_right">
			   <div class="index_main_left_6_right_top">也许你对以下文章感兴趣</div>
			   <div class="index_main_left_6_right_center">
			     <ul>
				  		          				  <li><a href="/course/6_system/linux/Linuxjs/2008628/128962.html" target="_blank">升级和安装zhcon的过程</a></li>
				  				  <li><a href="/course/6_system/linux/Linuxjs/2008821/136870.html" target="_blank">给FVWM添加运行对话框</a></li>
				  				  <li><a href="/course/6_system/linux/Linuxjs/20100329/201583.html" target="_blank">sendfile 分析</a></li>
				  				  <li><a href="/course/6_system/linux/Linuxjs/2008819/136541.html" target="_blank">Linux下多语言开发</a></li>
				  				  <li><a href="/course/6_system/linux/Linuxjs/20090317/161950.html" target="_blank">更改ADSL监测脚本</a></li>
				  				  <li><a href="/course/6_system/linux/Linuxjs/20090315/161715.html" target="_blank">C continue</a></li>
				  				  <li><a href="/course/6_system/linux/Linuxjs/2008913/142610.html" target="_blank">Linux内存使用的体会</a></li>
				  				  <li><a href="/course/6_system/linux/Linuxjs/20090901/173281.html" target="_blank">android init.rc 中对服务相关的理解</a></li>
				  				  </ul>
			   </div>
			</div>
		</div>
   </div>
   <div class="index_main_right">
   <div class="index_main_right1">
	     <div class="ad10"><script language="javascript" src="/ad/2010/article/ad10.js"></script></div>
	     <div class="index_main_right1_top">BBS社区热贴</div>
	        <ul>
			<script type="text/javascript" src="http://bbs.firnow.com/tools/showtopics.aspx?order=2&template=7&encoding=GB2312"></script>
			</ul>
	     </div>
		<div class="index_main_right1" style="margin-top:5px;">
		     <div class="index_main_right1_top1">Linux技术文章相关文章</div>
		        <ul style="background:#F3F4F6">
				  				  				  <li><p><a href="/course/6_system/linux/Linuxjs/200798/70535.html" target="_blank">sys520084玩samba(上）</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/200798/70565.html" target="_blank">将nfs文件系统挂载到uClinux中</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/200798/70538.html" target="_blank">在一台机器上，怎样开启两个mysql服务</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/200798/70531.html" target="_blank">如何架设Ubuntu Linux打印服务器</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/200798/70543.html" target="_blank">linux下工具集（转）</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/200798/70524.html" target="_blank">分析简单的线性只读文件系统romfs</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/200798/70534.html" target="_blank">ISO 宣布：微软OOXML未获批准</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/200798/70561.html" target="_blank">Linux那些事儿之我是Hub(17)八大重量级函数闪亮登场(一)</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/200798/70558.html" target="_blank">JavaScript动态添加删除表格行(支持FireFox)</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/200798/70552.html" target="_blank">solaris shell下退格键的设置</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/200798/70528.html" target="_blank">Writing USB Device Drivers</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/200798/70545.html" target="_blank">MySql4.1.15 Vs MySql5.0</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/2008816/136123.html" target="_blank">程序员向嵌入式系统工程师转型需注意的问题</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/2008815/136083.html" target="_blank">linux从入门到精通</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/2008816/136115.html" target="_blank"> 用 ProFTPD 构建 FTP 服务器</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/2008815/136072.html" target="_blank">成功的 Web 应用系统性能测试</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/2008816/136105.html" target="_blank">《自己动手写操作系统》笔记1-计算机启动过程</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/2008816/136099.html" target="_blank">BootFromUSB</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/2008815/136085.html" target="_blank">shell学习的好地方</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/2008816/136103.html" target="_blank">《自己动手写操作系统》笔记2-硬盘</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/2008815/136069.html" target="_blank">常用的RBL服务器列表、介绍及Postfix配置</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/2008815/136086.html" target="_blank">UNIX 管理超一流高手教你奇招 一</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/2008815/136081.html" target="_blank">USB引导盘制作</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/2008816/136112.html" target="_blank">金相显微镜|荧光显微镜|偏光显微镜|生物显微镜</a></li>
				  				</ul>
		</div>
		<div class="index_main_right1" style="margin-top:5px;">
		     <div class="index_main_right1_top1">Linux技术文章热门文章</div>
		        <ul style="background:#F3F4F6">
				  				  				  <li><p><a href="/course/6_system/linux/Linuxjs/200863/120882.html" target="_blank">火狐网页代理插件FoxyProxy图文详解[转]</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/2008619/126734.html" target="_blank">net-snmp移植</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/200798/70606.html" target="_blank">查看LINUX最大线程数及最大进程数</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/20071027/80267.html" target="_blank">Linux中断解析</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/2008827/137937.html" target="_blank">mount命令详解及实例分析</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/20081010/149810.html" target="_blank">服务器中采用的epoll技术的完整例子（附加一个客户端的例子）</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/2008611/124803.html" target="_blank">ARM Linux根文件系统（Root Filesystem）的制作</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/2008629/129170.html" target="_blank">CentOS 5.2最新版 发布下载</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/20071019/78330.html" target="_blank">glade 使用指南（1）</a></li>
				  				  <li><p><a href="/course/6_system/linux/Linuxjs/20090901/173312.html" target="_blank">Android init 启动过程分析</a></li>
				  			    </ul>
		</div>
	  <div class="index_main_right2">
		   <div class="index_main_right2_top">频道地图</div>
		   <div class="index_main_right2_center">
		      <div class="index_main_right2_center_list">
			     <p><a href="/list/10601.shtml" target="_blank">Linux</a></p>
				 <ul>
				     				     <li><a href="/list/1060101.shtml" target="_blank">Linux系列教程</a></li>
					 				     <li><a href="/list/1060102.shtml" target="_blank">Linux应用技巧</a></li>
					 				     <li><a href="/list/1060103.shtml" target="_blank">Linux技术文章</a></li>
					 				 </ul>
			  </div>
			  			   <div class="index_main_right2_center_list">
			     <p><a href="/list/10601.shtml" target="_blank">Linux</a></p>
			   </div>
			  			   <div class="index_main_right2_center_list">
			     <p><a href="/list/10602.shtml" target="_blank">Windows xp</a></p>
			   </div>
			  			   <div class="index_main_right2_center_list">
			     <p><a href="/list/10603.shtml" target="_blank">Windows 2003</a></p>
			   </div>
			  			   <div class="index_main_right2_center_list">
			     <p><a href="/list/10604.shtml" target="_blank">Windows 2000/NT</a></p>
			   </div>
			  			   <div class="index_main_right2_center_list">
			     <p><a href="/list/10605.shtml" target="_blank">DOS</a></p>
			   </div>
			  			   <div class="index_main_right2_center_list">
			     <p><a href="/list/10606.shtml" target="_blank">Mac OS X</a></p>
			   </div>
			  			   <div class="index_main_right2_center_list">
			     <p><a href="/list/10607.shtml" target="_blank">Vista</a></p>
			   </div>
			  			   <div class="index_main_right2_center_list">
			     <p><a href="/list/10608.shtml" target="_blank">FreeBSD</a></p>
			   </div>
			  			   <div class="index_main_right2_center_list">
			     <p><a href="/list/10609.shtml" target="_blank">Solaris</a></p>
			   </div>
			  			   <div class="index_main_right2_center_list">
			     <p><a href="/list/10610.shtml" target="_blank">SCO UNIX</a></p>
			   </div>
			  			   <div class="index_main_right2_center_list">
			     <p><a href="/list/10611.shtml" target="_blank">AIX</a></p>
			   </div>
			  			   <div class="index_main_right2_center_list">
			     <p><a href="/list/10612.shtml" target="_blank">Windows 2008</a></p>
			   </div>
			  		   </div>
		</div>
   </div>
	 </div>
<div align="center" id="foot">
	 <ul><li><a href="http://en.firnow.com/" rel="nofollow" target="_blank">English</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="http://corp.firnow.com/about.htm" rel="nofollow" target="_blank">关于我们</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="http://corp.firnow.com/jrfn.htm" rel="nofollow" target="_blank">诚聘英才</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="http://corp.firnow.com/contact.htm" rel="nofollow" target="_blank">联系我们</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="http://corp.firnow.com/fnls.htm" rel="nofollow" target="_blank">网站大事</a> | <a href="http://corp.firnow.com/link.htm" rel="nofollow" target="_blank">友情链接</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="http://corp.firnow.com/ggfw.htm" rel="nofollow" target="_blank">广告服务</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="/map.html" target="_blank">网站地图</a> </li></ul>
<ul><li>Copyright&copy;2008-2010 <a href="http://www.firnow.com" target="_blank">飞诺网[FirNow.Com]</a> 版权所有 </li></ul>
    <div id="foot_1"><dl><dt><img border="0" align="absmiddle" src="/images/2010/article/jyxwzbaxx.gif"> 
<img width="44" height="42" border="0" align="absmiddle" src="/images/2010/article/wmlogo.gif"> 
<img width="44" height="44" border="0" align="absmiddle" src="/images/2010/article/home_b.gif"> 
<b><object width="48" height="56" border="0" align="absmiddle" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,29,0">
<param name="movie" value="http://image.yesky.com/TLimages/index/gangting.swf">
<param name="quality" value="high">
<embed width="54" height="62" align="absmiddle" src="http://image.yesky.com/TLimages/index/gangting.swf" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash"><param name="wmode" value="opaque"></object></b>
</dt>
  <dd><a href="http://www.firnow.com/" target="_blank">飞诺网</a> 鲁ICP备10012328号<br>
    IT技术从现在起飞</dd><span class="discat"><a href="/list/1060103-055FBDB532A844EB.shtml">Linux技术文章</a></span></dl> 
<div class="clear"></div>
</div>
</div>
</div>
<input id="ajaxUrl" type="hidden"  value="/Ajax/Comment.ashx"/>
<input id="articleID" type="hidden"  value="136066"/>
<input id="catalogID" type="hidden"  value="1060103"/>
<div class="ad11"><script language="javascript" src="/ad/2010/article/ad11.js"></script></div>
<script type="text/javascript" language="javascript" src="/js/2010/Article_bot.js"></script>
</body>
</html>